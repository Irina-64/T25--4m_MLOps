schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py --config params.yaml
    deps:
    - path: data/raw/dataset.csv
      hash: md5
      md5: d0d310956d576c09511ff7bf3b46144b
      size: 96412524
    - path: params.yaml
      hash: md5
      md5: 5c9984f24d20bbebb82ef1ca5e735fa1
      size: 940
    - path: src/preprocess.py
      hash: md5
      md5: ce05e8ebbbcb6f9317abdd953dc76f40
      size: 3493
    params:
      params.yaml:
        encoding:
          categorical_cols:
          - region
          - mark
          - model
          - complectation
          - steering_wheel
          - gear_type
          - engine
          - transmission
          - characteristics
          - color
          - body_type_type
          - body_type_name
          - super_gen_name
        preprocess:
          handle_missing: true
          remove_outliers: false
          test_size: 0.2
          random_state: 42
        scaling:
          numerical_cols:
          - owners
          - year
          - price
          - mileage
          - power
          - displacement
          - super_gen_year_from
          - super_gen_year_to
    outs:
    - path: data/processed/dataset.csv
      hash: md5
      md5: 8a17f7950ef34fb1efdb759f1b4a1cc9
      size: 65712520
    - path: models/encoders.pkl
      hash: md5
      md5: 737ff522d7fac0959d2f169691cdb7ba
      size: 187879
    - path: models/scaler.pkl
      hash: md5
      md5: 2eba89a173d7a674116b39ff007b675b
      size: 1063
  split:
    cmd: python src/split_data.py --config params.yaml
    deps:
    - path: data/processed/dataset.csv
      hash: md5
      md5: 8a17f7950ef34fb1efdb759f1b4a1cc9
      size: 65712520
    - path: params.yaml
      hash: md5
      md5: 5c9984f24d20bbebb82ef1ca5e735fa1
      size: 940
    - path: src/split_data.py
      hash: md5
      md5: 21a38c965e69a0d44002fd28a1c4018d
      size: 1159
    params:
      params.yaml:
        preprocess.random_state: 42
        preprocess.test_size: 0.2
    outs:
    - path: data/split/X_test.csv
      hash: md5
      md5: 0c84c8fb9a649418bd1bd3baf0d3fa4b
      size: 11252565
    - path: data/split/X_train.csv
      hash: md5
      md5: b9f19ee9d4506801bd5552963155eb2c
      size: 45013816
    - path: data/split/y_test.csv
      hash: md5
      md5: d8c8a1f343412cf9d61e1f6e39813066
      size: 1683157
    - path: data/split/y_train.csv
      hash: md5
      md5: 6a74ae2669835b6e5556b6301b64e3f2
      size: 6732794
  train_baseline:
    cmd: python src/train.py --config params.yaml
    deps:
    - path: data/split/X_test.csv
      hash: md5
      md5: 0c84c8fb9a649418bd1bd3baf0d3fa4b
      size: 11252565
    - path: data/split/X_train.csv
      hash: md5
      md5: b9f19ee9d4506801bd5552963155eb2c
      size: 45013816
    - path: data/split/y_test.csv
      hash: md5
      md5: d8c8a1f343412cf9d61e1f6e39813066
      size: 1683157
    - path: data/split/y_train.csv
      hash: md5
      md5: 6a74ae2669835b6e5556b6301b64e3f2
      size: 6732794
    - path: params.yaml
      hash: md5
      md5: 5c9984f24d20bbebb82ef1ca5e735fa1
      size: 940
    - path: src/train.py
      hash: md5
      md5: 709dc981bd21117873643a42100acdda
      size: 6900
    params:
      params.yaml:
        models:
          xgboost:
            n_estimators:
            - 50
            - 100
            - 200
            max_depth:
            - 3
            - 6
            - 10
            learning_rate:
            - 0.01
            - 0.1
            - 0.2
            random_state: 42
    outs:
    - path: models/xgboost_model.pkl
      hash: md5
      md5: a4bc1f80955b1b10cbf24558cc0153df
      size: 63062
  evaluate_baseline:
    cmd: python src/evaluate.py --model_path models/xgboost_model.pkl
      --test_data data/split/X_test.csv --target_data data/split/y_test.csv
      --config params.yaml
    deps:
    - path: data/split/X_test.csv
      hash: md5
      md5: 0c84c8fb9a649418bd1bd3baf0d3fa4b
      size: 11252565
    - path: data/split/y_test.csv
      hash: md5
      md5: d8c8a1f343412cf9d61e1f6e39813066
      size: 1683157
    - path: models/xgboost_model.pkl
      hash: md5
      md5: a4bc1f80955b1b10cbf24558cc0153df
      size: 63062
    - path: params.yaml
      hash: md5
      md5: 5c9984f24d20bbebb82ef1ca5e735fa1
      size: 940
    - path: src/evaluate.py
      hash: md5
      md5: f2e56a3624a1dd668239a0eac58b7eb9
      size: 1821
    outs:
    - path: reports/eval.json
      hash: md5
      md5: 8505868abb1c7ca13fdd6aec9622a33d
      size: 96
